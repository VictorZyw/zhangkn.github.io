---
layout: post
title: aso
date: 2018-01-31
tag: aso
site: https://zhangkn.github.io
---

### 前言

### 正文



### see also
- [A free runtime modification library.](https://github.com/comex/substitute)
- [独奏's Wiki](http://wiki.honglu.me/)
- [CFRunLoopRun源码标注](http://wiki.honglu.me/iOS/CFRunLoopRun%E6%BA%90%E7%A0%81%E6%A0%87%E6%B3%A8.html)
- [undefinedblog](http://undefinedblog.com/archives/)
- [Proxy and DNS Server on iOS](https://github.com/zhangkn/tethering)
- [Cydia源搭建、维护、更新-deb文件编辑方](https://github.com/jasonslyvia/undefinedblog/blob/master/source/_posts/Cydia%E6%BA%90%E6%90%AD%E5%BB%BA%E3%80%81%E7%BB%B4%E6%8A%A4%E3%80%81%E6%9B%B4%E6%96%B0-deb%E6%96%87%E4%BB%B6%E7%BC%96%E8%BE%91%E6%96%B9%E6%B3%95.md)

```
http://www.youtube.com/watch?v=9eHKvCqBDBQ
主要记录一下如何添加和更新.deb文件
1、将所有的.deb文件放到 /repo/debs 文件夹中

2、在【终端】里输入命令

cd repo

3、继续输入命令

dpkg-scanpackages debs / > Packages

4、第3步生成了集合所有deb文件信息的 Packages 文件

5、利用 bzip2 生成 Cydia 可以识别的文件格式，输入命令

bzip2 -fks Packages

6、将所有文件上传到服务器即可

注：Release 文件为整个Cydia源的描述
```
- [搭建 Cydia 源](http://wiki.honglu.me/iOS/%E5%88%B6%E5%81%9ACydia%E6%BA%90.html)
```
<!-- 制作 Packages: -->
dpkg-scanpackages debs /dev/null > Packages
tar zcvf Packages.gz Packages
bzip2 -k Packages Packages.bz2
<!-- 制作 Release -->
Origin: Cydia/NetEase
Label: Cydia/NetEase
Suite: stable
Version: 1.0
Codename: netease
Architectures: iphoneos-arm
Components: main
Description: Distribution of Unix Software for iOS
<!-- SimpleHTTPServer -->
 python -m SimpleHTTPServer 8088
```
- [Hiraku Dev](https://hiraku.tw/works/)
- [cydia.git](https://git.saurik.com/cydia.git)
```
git clone git://git.saurik.com/cydia.git
Original source git://git.saurik.com/cydia.git
Web access http://gitweb.saurik.com/cydia.git
```
- [search.google.com](https://search.google.com/search-console?resource_id=https%3A%2F%2Fzhangkn.github.io%2F&hl=zh-CN)
- [在局域网搭建自己的Cydia源](http://blog.sina.com.cn/s/blog_9a2a9f370100yfij.html)
- [搭建Cydia软件源](https://bbs.feng.com/forum.php?mod=viewthread&tid=669283)

```
搭建软件源，必须保证至少有Release(记录软件源本身的相关信息)和Packages(记录具体软件包的存放位置和安装信息等数据)两个文件。 
1、Release 格式： http://apt.saurik.com/dists/tangelo-3.7/Release
必须 
Origin: 软件源名称，可以使用中文（Cydia的软件源列表中显示的标题） 
Label:  同上，也可以使用中文 
Suite: 软件源的类型，比如正式源，测试源等，可以分别用stable, beta, unstable等来表示，一般填stable就可以了 
Version: 版本号，这个其实不重要，随便填，一般都是写1.0 
Codename: 代码代号，比如BigBoss的就写BigBoss，威锋的就写WeiPhone，也没什么限制，只能用英文 
Architectures: 结构。iPhone平台统一写iphoneos-arm 
Components: main 
Description: 软件介绍，可以使用中文和html代码，具体能使用哪些代码在下面会介绍。 
可选 
Support: 支持，没什么作用，除非特别需要，否则可以不要这个。 
MD5Sum: 不是必须的，但如果Packages文件位置不与Release文件在同一目录下，则必须有此项。另外，如果需要签名Release文件，也必须有这个。关于MD5Sum的格式，在下文也会介绍。
2、Packages实质上是deb文件的control信息集合（利用dpkg-scanpackages命令来制作Packages文件）
另外多了deb文件本身的信息。（control文件是记录软件包本身的信息，但没有deb文件本身） 
3、服务器上文件存放位置，最简单的
cydia--
           |--debs--*.deb
           |--Packages
           |--Packages.bz2
           |--Packages.gz
           |--Release
           |--Release.gpg
```
- [cydia 源的结构](http://apt.saurik.com/dists/tangelo-3.7/)
- [http://apt.saurik.com/](http://apt.saurik.com/)
- [How to Host a Cydia™ Repository](http://www.saurik.com/id/7)

```
[root@desktop:/web/apt/xmpl]# dpkg-scanpackages -m . /dev/null >Packages
 ** Packages in archive but missing from override file: **
  com.saurik.myprogram

 Wrote 1 entries to output Packages file.
[root@desktop:/web/apt/xmpl]# bzip2 Packages
[root@desktop:/web/apt/xmpl]# gpg -abs -o Release.gpg Release
```
- [在局域网搭建自己的Cydia源](https://bbs.feng.com/read-htm-tid-8052646.html)
```
dpkg-scanpackages debs /dev/null > Packages
tar zcvf Packages.gz Packages
bzip2 -k Packages Packages.bz2
gpg --gen-key
gpg -abs -r "你刚才的密钥名字" -o Release.gpg Release
```
- [mypostlist](http://mp.blog.csdn.net/postlist)
- [how-to-develop-jailbreak-apps-for-ios](http://blog.kernelpanic.im/2014/01/25/how-to-develop-jailbreak-apps-for-ios)

```
关于Root privilege
方式一：
给你的executable加上setuid/setgid bits, 比如说在postinst脚本里加上: chmod 6755 /path/to/executable
程序启动的时候调用setuid(0)
iOS不允许直接以root权限运行, 所以还要一个exec trick.
方式二：
还有种做法是利用launchd来执行需要root权限的操作. 从权限隔离的角度而言, 这种做法更好
```
- [脚本文件- 可以利用这些属性来优化部署脚本](https://www.jianshu.com/p/7ab7234f5187)

```
preinst
在Deb包文件解包之前，将会运行该脚本。许多“preinst”脚本的任务是停止作用于待升级软件包的服务，直到软件包安装或升级完成。

postinst
该脚本的主要任务是完成安装包时的配置工作。许多“postinst”脚本负责执行有关命令为新安装或升级的软件重启服务。

prerm
该脚本负责停止与软件包相关联的daemon服务。它在删除软件包关联文件之前执行。

postrm
该脚本负责修改软件包链接或文件关联，或删除由它创建的文件。
```
- [deb包的执行脚本](http://wiki.ubuntu.org.cn/Deb%E5%8C%85%E7%AE%A1%E7%90%86%E5%90%91%E5%AF%BC#deb.E5.8C.85.E7.9A.84.E6.89.A7.E8.A1.8C.E8.84.9A.E6.9C.AC)
```
debian/preinst    安装前执行脚本
debian/postinst   安装后执行脚本
debian/prerm      卸载前执行脚本
debian/postrm     卸载后执行脚本
```
- [Debian 的 preinst, postinst, prerm, 和 postrm 脚本](http://blog.linhere.com/archives/589.html)
- [Deb包管理向导](http://wiki.ubuntu.org.cn/Deb%E5%8C%85%E7%AE%A1%E7%90%86%E5%90%91%E5%AF%BC)
- [https://www.jianshu.com/p/10669d1083b2](https://www.jianshu.com/p/10669d1083b2)
```
ASO 的目标就是提升 App 在 App Store 的自然下载量，而 下载量 = 展示量 × 下载转化率，所以，要么增加展示量，要么提升下载转化率
1、搜索指数 ≥ 4605 的关键词通常被认为有搜索量
2、高搜索指数以及低竞争度的关键词是最佳选择
3、关键词（副标题、关键字域部分）、下载量和活跃用户量对搜索优化有直接作用，而图标、截图以及预览视频、描述和用户评论，则影响下载转化率，对搜索优化有间接作用
```
- [app store FAQ](https://itunespartner.apple.com/en/apps/faq/App%20Store_Discovery)
- [ASO基础操作指南](https://book.douban.com/review/8644249/)
![](/images/posts/{{page.title}}/aso-seo.png)
- [ 安全模式SafeModeMgrExt，可利用cycript 进行分析](https://github.com/yangzhenglun/hookPro/blob/31f84a055db61dcee15f30b942a8f2f2c0b07860/hkregwx/Tweak.xm)
- [WireShark抓包](https://segmentfault.com/a/1190000011942765?_ea=3227568)
- [how-to-develop-jailbreak-apps-for-ios](http://blog.kernelpanic.im/2014/01/25/how-to-develop-jailbreak-apps-for-ios)
- [Debian 的 preinst, postinst, prerm, 和 postrm 脚本?](https://www.debian.org/doc/manuals/debian-faq/ch-pkg_basics.zh-cn.html)

```
preinst
Debian软件包(".deb")解压前执行的脚本, 为正在被升级的包停止相关服务,直到升级或安装完成.(成功后执行 'postinst' 脚本).

postinst
主要完成软件包(".deb")安装完成后所需的配置工作. 通常, postinst 脚本要求用户输入, 和/或警告用户如果接受默认值, 应该记得按要求返回重新配置这个软件. 一个软件包安装或升级完成后, postinst 脚本驱动命令, 启动或重起相应的服务.

prerm
停止一个软件包的相关进程, 要卸载软件包的相关文件前执行.T.

postrm
修改相关文件或连接, 和/或卸载软件包所创建的文件
```
- [AppProxyCap.m app 级别的代理](https://github.com/freewizard/AppProxyCap/blob/master/lib/AppProxyCap.m)